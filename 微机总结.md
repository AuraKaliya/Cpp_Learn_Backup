# 微机原理总结

## 8086系列处理器

1. 主要特点

    ①并行流水线的工作方式； ②对内存空间实施分段管理； ③支持多处理器系统

2. 总线系统

    数据总线：16条 双向 用于**CPU** 与**内存储器（或I/O设备）**之间交换信息

    地址总线：20条 单向

    控制总线：16条 双向

    Intel 8086支持  **1MB **  容量主存空间，80486支持**4GB** 容量主存空间。

3. 总线周期

    8086无等待总线周期由4个T状态组成。

4. 其他

    8086**预取指令**时，在其引脚上将产生 **存储器读**  总线操作；执行指令“**MOV AX, [BX]”**时，在其引脚上将产生  **存储器读**   总线操作；执行指令“**MOV [BX], AX**”时，在其引脚上将产生  **存储器写**  总线操作。

    8086准备好READY引脚为  **高 电平**，表示处理器已经**准备好**交换数据了。

    8086CPU引脚信号中**中断请求**两个信号名称为  **INTR**  和 **NMI**   。

    8086复位后，CS=**FFFFH**，IP=**0000H**，相应的物理地为   **FFFF0H**  。

    8086/8088的标志寄存器中的**溢出标志位**是 **OF** ，**中断允许标志位**是 **IF**    。

    8086/8088**CPU内部结构**按**功能**可分成两部分，即**执行单元EU** 和 **总线接口单元BIU **。

    8086/8088的**中断响应**用2个总线周期，从   **INTA**   引脚**输出2个负脉冲**。

    8086处理器有**3个**最基本的**读写控制信号**，它们是**M/IO*、 WR *   、 RD* ** 。



## 奔腾处理器Pentium

Pentium无等待的总线周期由**2个T状态**组成。

Pentium处理器采用  **64  位数据总线**与主存相连。

Pentium系列处理器的多媒体指令有  **MMX**  ，SSE，SSE2和 SSE3 类指令。

对于系统**时钟频率**为**66MHz**的Pentium处理器来说，2-1-1的猝发读传送周期用**4个时钟**传送**24个字节**的数据，其总线带宽是 **396  MB/s**。

Pentium处理器的**3个**最基本的**读写控制引脚**是**M/IO* 、 D/C* 、 W/R* **



## IA-32处理器



IA-32处理器在开中断状态，其标志IF＝  1   。指令 STI  是开中断指令，而关中断指令是  CLI  ，关中断时IF＝  0   。

IA-32处理器复位后，首先进入是 **实地址 **  工作方式。该工作方式分段最大不超过  **64KB **  。

**保护方式**  是IA-32处理器固有的工作状态。

IA-32处理器只有 **8  个 32  位通用寄存器**。

## 8253

8253定时计数器内部有  **3 个**独立的**16 位** 定时计数器。

8253工作于方式**3**时，当计数初值为  **偶**  数时，输出OUT为**对称方波**。

8253接口芯片有 **4个地址**。

8253可采用**6种工作方式**。

## 8255

8255接口芯片有**4个地址**。

8255芯片的端口A和端口B工作于**方式1的输入方式**时，端口A的**INTEA**对应 **PC4** ，端口B的**INTEB**对应  **PC2**  。端口A和端口B工作于**方式1**的**输出方式**时，端口A的**INTEA**对应  **PC6**   ，端口B的**INTEB**对应  **PC2 **  。

8255可采用  **3  种工作方式**。

对8255的**控制寄存器**写入**A0H**，则其端口C的PC7引脚被用作  **OBF*  信号线**。

8255A端口C的**按位置位复位功能**是由控制字中的**D7= 0**  来决定的。

当8255A的控制字最高位D7=1时，表示该控制字为  **方式  控制字**。

为了使8255A的端口地址为**偶地址**，一般将8255A的**A1、A0**和8086系统总线的 **A2、A1 **相连。

8255端口C的位控制字：0+【D6-D0】 **共8位**，**D3-D1为位选择**（8个），**D0**为1则为**置位**，**D0**为0则为**复位**。



## 8259

对于8259A的中断请求寄存器IRR，当某一个IRi端等于  1   时，则表示该端有中断请求。

8259接口芯片有 **2个地址**。

某时刻中断控制器8259A的**IRR内容是08H**，说明其  **IR3  引脚有中断请求**。某时刻中断控制器8259A的**ISR内容是08H**，说明 **IR3  请求的中断正在被服务**。

当**中断控制器8259A**的A0连地址总线的A1时，若其中一个**端口地址为62H**，则另一个端口**地址为  60H **   ；若某外设的**中断类型码为86H**,则该中断源应加到8259A中断请求寄存器IRR的  **IR6   输入端**。





## 其他知识点

冯诺依曼计算机的三个子系统：处理器、存储系统、输入输出系统

占用总线进行数据传输，一般需要经过**总线请求和仲裁、 寻址  、数据传送和结束**4个阶段。

在查询输入/输出方式下，外设必须至少有两个端口，一个是**状态**端口，另外一个是**数据**端口。

在实地址工作方式下，逻辑地址“7380H∶400H”表示的物理地址是 **73C00H ** ，并且该段起始于  **73800H **  物理地址。

某个处理器具有16个地址总线，通常可以用A0表达最低位地址信号，用A15表达最高地址信号。

实地址方式下，主存最低  **1KB**   的存储空间用于中断向量表。向量号为8的中断向量保存在物理地址  **20H**   开始的  **4  个连续字节**空间。

**AGP，即  图形加速端口**      ，是一种为了提高视频带宽而设计的**总线规范**。

**数据总线**用来在 **CPU**  与**内存储器（或I/O设备）**之间交换信息。

**PCI**属于高性能  **局部 总线**，其独立于微处理器的设计，可以保证其适应微处理器的不断升级换代，并可以和ISA等局部总线完全兼容。

USB总线理论上最多能够连接  **127**   个USB设备，**USB 2.0**支持低速**1.5Mb/s**、全速 **12Mb/s**   和高速**480Mb/vs**三种速率。

计算机微处理器主要由  **运算器**    和  **控制器**   组成。

处理器**读取存储器**操作数和代码时，都发生  **存储器读**     的总线操作。

CPU从I/O接口的  状态   寄存器中获取外部设备的工作状态。

指令**IN**是将**数据从 I/O端口 传输到 处理器 ** ，执行该指令时处理器引脚产生**I/O总线周期**。



## 大题

1. 处理器内部具有哪3个基本部分？8086分为哪两大功能部件？其各自的主要功能是什么？

    处理器内部有**算数逻辑单元ALU、指令处理单元EU、寄存器**3个基本部分。

    8086 有两大功能部件：**总线接口单元**和**执行单元**。

    **总线接口单元BIU**：管理着 **8086 与系统总线的接口**，负责**处理器对存储器和外设进行访问**。8086 所有对外操作必须通过 BIU 和这些总线进行。 

    **执行单元 EU**：**负责指令译码、数据运算和指令执行**。

2. 什么是I/O独立编址和统一编址？各有什么特点？

    独立编址：存储器和IO端口再两个**独立的地址空间**中。**结构清晰独立，但需要用专用IO指令，灵活性差。**

    统一编址：存储器和IO端口公用**统一的地址空间**。**程序设计灵活，外设数量不限，但影响了内存容量**。

3. 一般的I/O接口电路安排有哪三类寄存器？它们各自的作用是什么?

    ①**数据寄存器**：用于临时存储数据交换时的数据。

    ②**状态寄存器**：用于保存运算结果的状态数据。

    ③**控制寄存器**：用于保存控制数据。

4. 简述**主机与外设进行数据交换**的几种常用方式。

    ①**程序传送方式**：包括无条件传送和查询传送，无条件传送直接传输数据，查询传送在外设准备好的状态时传输数据。

    ②**中断传送方式**：外设主动向CPU发起中断请求，CPU响应后进行数据传送。

    ③**DMA传送方式**：通过DMA控制器接管总线进行的IO数据传输。

5. 常见的定时技术有哪几种？简述其特点。

    **软件定时和硬件定时**。软件定时时通过执行一段循环程序来实现的，通过循环次数调整定时时长，不需要专门电路，成本低，但占用CPU；硬件定时采用定时器电路或单稳延时电路实现，特点是定时灵活不占用CPU且适用范围广。

6. 与系统总线连接的输入接口为什么需要三态缓冲器？

    某一时刻只有一个设备向总线发送数据，需要有缓冲器进行设备间传输速度的平衡缓冲。

7. 简述8086的两种工作方式以及它们之间的区别。

    **最小工作模式**：只有一个8086微处理器。所有的总线控制信号直接由8086产生，总线控制逻辑电路被缩减到最小，属于单处理器系统。

    **最大工作模式**：包括主处理器和协处理器。可以构成多处理器系统，系统所需的控制信号由总线控制器8288提供。

8. 中断控制器8259A中IRR，IMR和ISR三个寄存器的作用是什么?

    IRR:**中断请求控制器（**8位），用于保存IR0-IR7的中断请求信号。

    IMR：中断屏蔽寄存器。用于存放中断控制字，其中为1的位表示对应的中断请求输入被屏蔽。

    ISR:中断服务寄存器：用于保存正在服务的中断源。为1的位表示该对应中断源正在处理。

9. 32位PC为什么采用多级总线结构而不是单总线结构？

    单总线结构限制很多需要高速传输的部件，多级总线相较于单总线结构能够给PC提供**速度更快、性能更高的共用通道**。

10. 什么是中断源?为什么要安排中断优先级?什么是中断嵌套?什么情况下程序会发生中断嵌套? 

    中断源是引起中断的事件或发出中断请求的来源。多个中断同时发生时，为保证CPU运行效率和考虑实际程序运行需求，需要安排中断优先级。当系统正在执行中断服务时，另一个优先级更高的中断提出了中断请求，系统停下正在处理的中断而处理该中断，即发生了中断嵌套。

11. 外设向CPU发中断请求，但CPU不响应，其原因可能有哪些？

    ①CPU处于关中断状态，IF=0; ②该中断请求被屏蔽; ③中断请求未能被CPU接收到; ④DMA接管总线时。

12. 什么是实地址方式、保护方式和虚拟8086方式？它们分别使用什么存储模型？

    实模式：寻址采用和8086相同的16位段和偏移量，最大寻址空间1MB，最大分段64KB，可以使用32位指令。

    保护模式：寻址采用32位段和偏移量，最大寻址空间4GB，最大分段4GB，在该模式下可进入虚拟8086方式。

    虚拟8086方式：运行在保护模式中的实模式，在32位保护模式下执行16位程序。属于保护模式范围。

13. 说明8253方式1和方式5的工作特点。

    8253工作方式：

    ​				方式0：单次波，产生中断，结束为高电平，软件启动。

    ​				方式1：单次波，不产生中断，计数期间为低电平，其余为高电平，**硬件控制启动**。

    ​				方式2：连续负脉冲，最后一个计数期间为低电平，其余为高电平。周期性波形。

    ​				方式3：连续，周期性方波（1：1）。

    ​				方式4：单次波形，计数后输出一个CLK的低电平，其余为高电平。

    ​				方式5：单次波形，**硬件启动**。可重置初值和GATE。需要两个写脉冲（写入控制字和计数初值）

14. **IA-32**什么是平展存储模型、段式存储模型和实地址存储模型？

    平展存储模型：存储器是一个连续的地址空间，线性空间地址。IA-32支持4GB容量线性存储空间。

    段式存储模型：对程序而言存储器有一段独立的地址空间（段），每个段都能达到4GB容量，访问某一段时过渡到线性存储空间。

    实地址存储模型：8086存储器的存储模型，线性空间最大为1MB，段最大为64KB。

15. 8086系统中为什么一定要有地址锁存器？需要锁存哪些信息？

    因为8086中A0-A19是复用信号，需要地址锁存器将地址信息保存起来，为外接存储器或外设提供地址信息。

    需要锁存的有**地址**信号和**BHE***信号。

16. 什么情况下需要插入TW状态？插入TW状态取决于哪些因素？

    外设和存储器设备不能及时配合CPU进行数据传输时，通过READY信号在T3状态启动前通知CPU，CPU会在T3状态结束后插入一个等待时钟周期Tw。

    插入多少个Tw取决于CPU和外设或存储器之间的速度差异。

17. ISA和EISA的异同点。

    EISA是扩展工业标准体系结构总线的简称，适用于32位微处理器。EISA总线是在ISA总线基础上通过增加地址线、数据线、控制线实现的。

18. 总线有哪些性能参数？试比较ISA总线和PCI总线的性能参数。

    总线宽度、总线频率和总线带宽。

    ISA 8/16数据读写能力，最高时钟频率8MHz，带宽8MB/S

    PCI 32位33Mhz-132MB/S 64位33MHZ-264MB/S 64位66MHZ-528MB/S

19. PCI总线特点。

    即插即用，与处理器无关，具有32/64位数据总线，采用集中式总仲裁、支持多处理器系统。

20. 即插即用和热插拔有什么区别？

    即插即用是安装设备之后系统自动配置和管理设备，热拔插是开机状态下随时可将设备与主机连接，并且运行状态下直接断开连接不会造成数据损坏。

21. 

## 名词解释

1. 软件中断：**程序运行期间**，软件通过特殊指令请求操作系统优先执行特定功能。
2. 指令周期：CPU执行指令的基本时间单位，包括取指、译码、执行、存储等阶段.
3. 可屏蔽中断：可以在CPU任意时间暂停或延迟响应的中断，通常由外设触发。
4. I/O端口：用于和计算机系统进行输入输出交互的接口，可通过读写指令访问。
5. 并行接口：一种通信接口，允许多个数据同时在总线上传输，以提高数据传输效率。
6. BIU：总线接口单元，负责与CPU与总线的通信和控制。
7. 总线周期：CPU与存储器或I/O设备之间进行传输的时间间隔，包括地址传送、数据传送和存储器应答三个阶段。
8. 逻辑地址：由CPU生成的地址，通常表示程序或数据在逻辑上的位置。
9. I/O端口：用于计算机系统进行输入/输出交互的硬件接口，可通过读写指令访问。
10. 总线：数据、地址和控制信号传输的通道，用于计算机硬件单元间的通信。
11. EU：执行单元，负责执行算术、逻辑和分支指令，控制程序流程。
12. 时钟周期：一个CLK信号对应的时间，用于驱动CPU执行指令。
13. 物理地址：CPU生成的实际地址，表示数据在存储器中的位置。
14. 接口：两个或多个系统间的连接点，可以通过接口进行数据传输和通信。
15. 中断源：引起中断的硬件或软件，通常由外部设备产生的信号触发。

